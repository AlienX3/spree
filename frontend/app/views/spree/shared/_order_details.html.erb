<div class='checkout-confirm-order-details w-100 d-flex flex-wrap' data-hook>
  <%= render partial: 'spree/checkout/delivery_informations', locals: { order: @order, class_name: 'd-none d-lg-block' } %>
  <div class="checkout-confirm-order-details-line-items d-flex flex-column mt-5 mr-4">
    <div class="checkout-confirm-order-details-line-items-header d-none d-sm-block d-lg-none align-self-start mb-3">
      <%= Spree.t(:products) %>
    </div>
    <div class="d-table" data-hook="order_details">
      <div class="d-none d-lg-table-row text-secondary text-uppercase" data-hook="order_details_line_items_headers>
        <p class="d-table-cell pb-1">
          <%= Spree.t(:product) %>
        </p>
        <p class="d-table-cell pb-1">
          <%= Spree.t(:price) %>
        </p>
        <p class="d-table-cell pb-1">
          <%= Spree.t(:quantity) %>
        </p>
        <p class="d-table-cell pb-1">
          <%= Spree.t(:total) %>
        </p>
      </div>
      <% @order.line_items.each do |line_item| %>
        <div class="checkout-confirm-order-details-line-items-line-item w-100 d-table-row" data-hook="order_details_line_item_row">
          <div class="checkout-confirm-order-details-line-items-line-item-name d-table-cell align-middle py-3 py-sm-4">
            <div class="d-flex align-items-lg-center">
              <div data-hook="order_item_image">
                <%= link_to product_image(line_item.variant), line_item.product %>
              </div>
              <div class="d-flex flex-column mt-2 mt-lg-0" data-hook="order_item_description">
                <div><%= link_to line_item.name, line_item.product %></div>
                <ul class="checkout-confirm-order-details-line-items-line-item-name-options text-uppercase list-unstyled mb-0">
                  <% line_item.variant.option_values.sort { |ov| ov.option_type.position }.each do |ov| %>
                  <li>
                    <% # TODO: rework option values so options_text method can be used here %>
                    <%= "#{ov.option_type.presentation}: #{ov.name.titleize}" %>
                  </li>
                <% end %>
                </ul>
                <div class="d-lg-none" data-hook="order_item_price">
                  <div class="font-weight-bold"><%= line_item.single_money.to_html %></div>
                </div>
                <div class="d-lg-none" data-hook="order_item_qty">
                  <span><%= Spree.t(:quantity) %>:</span>
                  <span class="font-weight-bold"><%= line_item.quantity %></span>
                </div>
              </div>
            </div>
          </div>
          <div class="checkout-confirm-order-details-line-items-line-item-price d-none d-lg-table-cell align-middle py-4" data-hook="order_item_price">
            <div><%= line_item.single_money.to_html %></div>
          </div>
          <div class="checkout-confirm-order-details-line-items-line-item-quantity d-none d-lg-table-cell align-middle py-4" data-hook="order_item_qty">
            <span class="checkout-confirm-order-details-line-items-line-item-quantity-val d-lg-block"><%= line_item.quantity %></span>
          </div>
          <div class="checkout-confirm-order-details-line-items-line-item-total d-none d-lg-table-cell align-middle py-4" data-hook="order_item_total">
            <div><%= line_item.display_total.to_s %></div>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <%= render partial: 'spree/checkout/delivery_informations', locals: { order: @order, class_name: 'd-lg-none' } %>

  <div class="mt-5" id="checkout-summary" data-hook="checkout_summary_box">
    <%= render partial: 'spree/checkout/summary', locals: { order: @order } %>
    <% unless @order.complete? %>
      <div data-hook="buttons">
        <% submit_label_key = @order.confirm? ? :place_order : :save_and_continue %>
        <%= submit_tag Spree.t(submit_label_key), class: 'btn btn-primary text-uppercase font-weight-bold w-100 checkout-content-save-continue-button' %>
      </div>
    <% end %>
  </div>
</div>
